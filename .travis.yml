language: node_js
node_js:
- '4'
branches:
  only:
  - dev
env:
  global:
  - GH_REF: github.com/Nanmen/Nanmen.github.io.git
  - secure: GtkK1YzypRm/+PdQn7yBk3eMreKc7Vo5UEBEIoYC2H2w7q7o6+aIsS647tbOfbPDU2qn+KBecY84IYXOLBAxshj5+Kj4bUvDdmQu04VdT98wHmw7KRqVt2fLa+JU20ifJ92f1NU/TsJjcL913EbI9B/YIfgx/Fn5G/zY4yyk0oFniIZIr3u3GTD8KmqVSCME01sNumDOO7gBQOH9LS8Ju3x0HNJMkTOhHHP4y6hOHFzDTSZKkaEoSeSIS4uokDXM3YBvTz96wwP2X2huvoKuWEIUs6EJ1BOZUpzGKy5Gx83YDsJUULuOXNFMTDEd54TA7M4lVN2TqOwVKR67+wLmpvEKs58EuhrFHet23N4zcOjlKl56n25/c2acZ4Vhp8azX900VPkkbI3knMPpFiS64AMSICWXWu16uBajZFFp1tAVOQNupfKVfJ58zhNxaeSo6r0rXCO7buQNhwnE6e3okpxs0Q6oGGCOlx4BDcSw1IydAKSDvizTfMtpSW4YVi2cTEu6cG3KlXIvWUsxPpYI1iKytdOOopcSrl00lHGmbxG1geM3/Vg8p//QAVmceVlcjCegT5xkHzGSW7uLQHnivuGhskKX0XNEi80klAwVkrQ4c0bXfykBbK1qTVisNprjONWRlg+sBBoZijPifrvVjaXsZ3rWkOGljsUyOuiGw5k=
  - secure: FXpIMMaUdOFc4OHl34oXACkC73cZJgHSKXPQi7aMlkBPM/Rq3/k3t5FjiJzo2myd0AjGhDIyao/GVeRHklQMhtX5TGHPvaWIue3LAiCYWbf/f4vsCwc8PkKOdAK3JPeOBkv+AJv5jK2WtC27EUnLiSXJiX2Lz+GCTueSR97Tfx+3fCxrEGb/q0gjXgbJ5ypK6eqDXJ63yeBYcpQjQWkSKLU3bcl9ihDd8ZtJpA/CbqpxUWo+kI4C1y6YpecPz3T/XY8v+5DQS/L0F1+jcMakCLb0rMbaEXZdyC74HUHjG+yISxTlhAKP+4KXUiYHiKcm01HAZ2AEkGoiFVgcE52Z2R9NrdxZYxpncLARYvR5F7nIrcpt8kqZWeGlTfLWB3loIiEYxU0cQL/gFmO4IWcYo9VekcFUid9oK1SEKIPVIqVokU+nPAWCXz5aSJFfcsHiRHmBBCowXfHZDFDG8wtmI8d45KSyn7pwBok3iA3wRfmS72HxVsm4siM6zrQdQALx/A+dhYeDX1T4sZy0TLma66J0tBOUiQ7gdOJnSLsu2QM15u5rPUhznUbOXKYtcfv55196n+OLdsfm14S557BZS26M6dCsU57lZLhKo3jf7+TpfwiG9Iry/1ZZwvYtWawpNkmgAXr6vBnBJcNGifSVKjE+vWK6B4VjbOoNeo8N8v4=
  - secure: my8LZI7lACNP0jaL/uBVXQQO8XJYymqUMv32Ys/RMixQaMb/fNKZiQGlV1bml/4FgUGoHTrS5ChiP2sRYOfHq8xqYDlp1vIAGEUXapfib0JHjN+g9fFKO380xpVLmYPd9riABypj54wl0/rZrHwxEVRQNkhFZnIzbFgiRctwI8JhyHK8hJNyUWbiUw/Ut0Wj0RalQgEnRBYzwbSNZgSNVITVUgEfzco2PNYL646GGErWuIAdhk1zO58QFkknspa7rJwUNQGouSTfIHagRwatG4+e8BY3mhZ3y1l+uoakNfezZBWNWz/Tf7VO/B+rO65IoFzRk6oBgnYFnXHCfloBlfJXbXlErjp0fR4FScgo4QUSf1gc2p6QuE0RR8nZWOCI+qLu0qQLBuHG+iwOeyu+ljXKcaXWf2KGAuyOWPmdX7tmUy8qLXT5K/eMfgHztUT9mkhi8tGXb0ZXjaaaAC2UqAr1hbLx4g+cEPGQq2A2eqEtDHd4YXDEvPXo7KfKpQmqyC0qqkmpNERlhynaxFMmiZUepZ7PG6uiIa3pLCDzT+rFTKscaCc/MN/2tLAzQj4zIfIWjl6U0c7j/O0cc9ITqL1VKFZNU6EBs1z0loSRGY9jA1fuQXvdvXd8n74b3g8RvSvq569+JBQa/sbF3fq3sTQQJhLxKTgr+BsQEu+do/I=
before_install:
- export TZ='Asia/Shanghai'
- npm install -g hexo
- npm install -g hexo-cli
before_script:
- git config --global user.name "Nanmen"
- git config --global user.email "ningfan210@126.com"
- sed -i'' "s~git@github.com:Nanmen/Nanmen.github.io.git~https://${REPO_TOKEN}:x-oauth-basic@github.com/Nanmen/Nanmen.github.io.git~"
  _config.yml
install:
- npm install
script:
- hexo clean
- hexo generate
after_script:
- git init
- git add .
- git commit -m "Update docs"
- git pull "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
- git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
after_success:
- hexo deploy
